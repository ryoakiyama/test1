package com.internousdev.e_bookshare;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;

import com.internousdev.e_bookshare.util.DBConnector;
import com.mysql.fabric.xmlrpc.base.Array;


public class ListDAO {

	private DBConnector dbConnector = new DBConnector();
	private Connection connection = dbConnector.getConnection();
	List bookDTOList = new ArrayList<>();
	public BookDTO getMyPageUserInfo() throws SQLException {

		BookDTO listDTO = new BookDTO();
		String sql = "SELECT * from book_list";

		try {

			PreparedStatement stmt = connection.prepareStatement(sql);
			ResultSet resultSet = stmt.executeQuery();


			while(resultSet.next()) {
				//DTOに入れてそれをリストに入れるという作業

				BookDTO dto = new BookDTO();

				dto.setBookname(resultSet.getString("bookname"));
				dto.setBookprice(resultSet.getString("bookprice"));


				//そのデータを何件も入る箱に入れている
				//そうして全て表示されたものがList

			}
		} catch(Exception e) {
			e.printStackTrace();
		} finally {
			connection.close();
		}
		return listDTO;
	}

}

