package com.internousdev.ecsite.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;
import com.internousdev.ecsite.dto.BuyItemDTO;
import com.internousdev.ecsite.util.DBConnector;

public class BuyItemDAO {

List<BuyItemDTO> buyItemDTOlist= new ArrayList<BuyItemDTO>();

public List<BuyItemDTO> select(){
DBConnector dbConnector = new DBConnector();
Connection con = dbConnector.getConnection();
//private BuyItemDTO buyItemDTO = new BuyItemDTO();
//buyitem型の箱がこれで完成した
//複数帰ってくるSQL文はリストを作る

String sql = "select * from item_info_transaction";

try {

	PreparedStatement ps = con.prepareStatement(sql);
	ResultSet rs = ps.executeQuery();

	while(rs.next()) {

    BuyItemDTO buyItemDTO = new BuyItemDTO();

		//ここのDAOにリストを作る
	buyItemDTO.setId(rs.getInt("id"));
	buyItemDTO.setItemName(rs.getString("item_name"));
	buyItemDTO.setItemPrice(rs.getString("item_price"));

	//これで箱がリストに入った
	buyItemDTOlist.add(buyItemDTO);
}
} catch(Exception e) {

e.printStackTrace();

}
	try{
		con.close();
	}catch(SQLException e){
		e.printStackTrace();
	}
return buyItemDTOlist;
}
}

